{% extends 'bundles/EasyAdminBundle/page/login.html.twig' %}

{% block page_title %}{{ 'bo.resetpass.title'|trans }}{% endblock %}

{% block wrapper_wrapper %}
<div class="login-wrapper">
    <header class="main-header">
        <div id="header-logo">
            {% block header_logo %}
                <div class="logo logo-long">
                    {{ 'bo.resetpass.title'|trans }}
                </div>
            {% endblock %}
        </div>
    </header>

    <section class="content">
        {% for flashError in app.flashes('reset_password_error') %}
            <div class="w-100 alert alert-danger rounded mb-3">
                <i class="fas fa-times-circle mr-1"></i>
                {{ flashError }}
            </div>
        {% endfor %}

        {{ form_start(resetForm) }}

        <div class="form-group">
            {{ form_label(resetForm.plainPassword.first) }}
            {{ form_errors(resetForm.plainPassword.first) }}
            <div class="form-widget">
                {{ form_widget(resetForm.plainPassword.first, { 'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="form-group">
            {{ form_label(resetForm.plainPassword.second) }}
            {{ form_errors(resetForm.plainPassword.second) }}
            <div class="form-widget">
                {{ form_widget(resetForm.plainPassword.second, { 'attr': {'class': 'form-control'}}) }}
            </div>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg btn-block" onclick="this.form.submit(); this.disabled=true;">{{ 'bo.resetpass.reset'|trans }}</button>
        </div>
    {{ form_end(resetForm) }}
    </section>

    <script type="text/javascript">
        const resetForm = document.querySelector('form');
        resetForm.addEventListener('submit', function () {
            resetForm.querySelector('button[type="submit"]').setAttribute('disabled', 'disabled');
        }, false);
    </script>
</div>
{% endblock %}
