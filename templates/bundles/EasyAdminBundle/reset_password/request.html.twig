{% extends 'bundles/EasyAdminBundle/page/login.html.twig' %}

{% block page_title %}Mot de passe oubli√©{% endblock %}


{% block wrapper_wrapper %}
<div class="login-wrapper">
    <header class="main-header">
        <div id="header-logo">
            {% block header_logo %}
                <div class="logo logo-long">
                    {{ 'bo.resetpass.title'|trans }}
                </div>
            {% endblock %}
        </div>
    </header>

    <section class="content">
        {% for flashError in app.flashes('reset_password_error') %}
            <div class="w-100 alert alert-danger rounded mb-3">
                <i class="fas fa-times-circle mr-1"></i>
                {{ flashError }}
            </div>
        {% endfor %}

        {{ form_start(requestForm) }}
        <div class="form-group">
            {{ form_label(requestForm.email) }}
            {{ form_errors(requestForm.email) }}
            <div class="form-widget">
                {{ form_widget(requestForm.email, { 'attr': {'class': 'form-control'}}) }}
            </div>
            {{ form_help(requestForm.email) }}
        </div>
        {{ form_row(requestForm._token) }}

        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg btn-block" onclick="this.form.submit(); this.disabled=true;">{{ 'bo.resetpass.send'|trans }}</button>
        </div>
        {{ form_end(requestForm) }}

        <script type="text/javascript">
            const requestForm = document.querySelector('form');
            requestForm.addEventListener('submit', function () {
                requestForm.querySelector('button[type="submit"]').setAttribute('disabled', 'disabled');
            }, false);
        </script>
    </section>
</div>
{% endblock %}
